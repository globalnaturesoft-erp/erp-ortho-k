<% if @columns.present? and @rows.present? %>
    <table class="table table-advance table-checkable order-column" id="">
        <tr>
            <th class="bg-grey" width="6%"></th>
            <% if @row_subs.present? %>
                <th class="bg-grey"></th>
            <% end %>
            <% @columns.each do |column| %>
                <th class="text-center bg-grey" width="4%"><%= column.value %></th>
            <% end %>
        </tr>
        <% if @column_subs.present? %>
            <tr>
                <th class="bg-grey"></th>
                <% if @row_subs.present? %>
                    <th class="bg-grey"></th>
                <% end %>
                <% @columns.each do |column| %>
                    <% @column_subs.each do |column_sub| %>
                        <% if !Erp::Products::Product.joins(:products_values)
                            .where("erp_products_products.cache_properties LIKE ?", "%[#{column.id}]%")
                            .where("erp_products_products.cache_properties LIKE ?", "%[#{column_sub.id}]%")
                            .empty?
                        %>
                            <th class="text-center bg-grey"><%= column_sub.value %></th>
                        <% end %>
                    <% end %>
                <% end %>
            </tr>
        <% end %>
        <% @rows.each do |row| %>
            <tr>
                <th class="text-center bg-grey" style="padding: 8px"><%= row.value %></th>
                <% if @row_subs.present? %>
                    <th class="text-center bg-grey" width="1%">
                        <% @row_subs.each do |row_sub| %>
                            <% if !Erp::Products::Product.joins(:products_values)
                                .where("erp_products_products.cache_properties LIKE ?", "%[#{row.id}]%")
                                .where("erp_products_products.cache_properties LIKE ?", "%[#{row_sub.id}]%")
                                .empty?
                            %>
                                <%= row_sub.value %>
                            <% end %>
                        <% end %>
                    </th>
                <% end %>
                <% @columns.each do |column| %>
                    <% stock = (0..5).to_a.sample %>
                    <td class="text-center stock-num stock-num-<%= stock %>"><%= stock %></td>
                <% end %>
            </tr>
        <% end %>
    </table>
<% else %>
    <div class="alert alert-warning"><%=raw t('.please_select_column_and_row_filter') %></div>
<% end %>
